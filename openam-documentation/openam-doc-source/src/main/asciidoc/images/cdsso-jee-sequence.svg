<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1095px" preserveAspectRatio="none" style="width:899px;height:1095px;" version="1.1" viewBox="0 0 899 1095" width="899px" zoomAndPan="magnify"><defs><filter height="300%" id="fld92mn" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="199" x="351.5" y="22.9951">Java EE Agent and CDSSO</text><rect fill="#FAFAFA" height="1060.0703" style="stroke: #A80036; stroke-width: 1.0;" width="506" x="392" y="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="614" y="46.3638">OpenAM</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="45" x2="45" y1="88.7266" y2="1039.7734"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="337" x2="337" y1="88.7266" y2="1039.7734"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="444" x2="444" y1="88.7266" y2="1039.7734"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="679" x2="679" y1="88.7266" y2="1039.7734"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="837" x2="837" y1="88.7266" y2="1039.7734"/><rect fill="#FEFECE" filter="url(#fld92mn)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="71" x="8" y="53.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="15" y="73.4248">Browser</text><rect fill="#FEFECE" filter="url(#fld92mn)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="71" x="8" y="1038.7734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="15" y="1058.7686">Browser</text><rect fill="#FEFECE" filter="url(#fld92mn)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="93" x="289" y="37.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="296" y="57.1279">Java EE App</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="307" y="73.4248">&amp; Agent</text><rect fill="#FEFECE" filter="url(#fld92mn)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="93" x="289" y="1038.7734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="296" y="1058.7686">Java EE App</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="307" y="1075.0654">&amp; Agent</text><rect fill="#FEFECE" filter="url(#fld92mn)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="92" x="396" y="53.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="403" y="73.4248">CDCServlet</text><rect fill="#FEFECE" filter="url(#fld92mn)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="92" x="396" y="1038.7734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="403" y="1058.7686">CDCServlet</text><rect fill="#FEFECE" filter="url(#fld92mn)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="178" x="588" y="53.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="164" x="595" y="73.4248">Policy, Session Services</text><rect fill="#FEFECE" filter="url(#fld92mn)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="178" x="588" y="1038.7734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="164" x="595" y="1058.7686">Policy, Session Services</text><rect fill="#FEFECE" filter="url(#fld92mn)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="110" x="780" y="53.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="787" y="73.4248">AuthN Service</text><rect fill="#FEFECE" filter="url(#fld92mn)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="110" x="780" y="1038.7734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="787" y="1058.7686">AuthN Service</text><polygon fill="#A80036" points="325.5,130.7266,335.5,134.7266,325.5,138.7266,329.5,134.7266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="45.5" x2="331.5" y1="134.7266" y2="134.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="52.5" y="122.3599">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="65.5" y="114.7935">Browse to protected resource.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="255" x="65.5" y="129.9263">No SSO token for resource domain, yet.</text><polygon fill="#A80036" points="56.5,174.9922,46.5,178.9922,56.5,182.9922,52.5,178.9922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="50.5" x2="336.5" y1="178.9922" y2="178.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="62.5" y="166.6255">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="246" x="75.5" y="159.0591">Set an amFilterCDSSORequest cookie,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="75.5" y="174.1919">and redirect...</text><polygon fill="#FBFB77" filter="url(#fld92mn)" points="50,192.2578,50,247.2578,332,247.2578,332,202.2578,322,192.2578,50,192.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="322" x2="322" y1="192.2578" y2="202.2578"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="332" x2="322" y1="202.2578" y2="202.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="261" x="56" y="209.3247">The amFilterCDSSORequest cookie holds</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="254" x="56" y="224.4575">information consumed when processing</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="56" y="239.5903">the form submitted in 15.</text><polygon fill="#A80036" points="432,273.6563,442,277.6563,432,281.6563,436,277.6563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="45.5" x2="438" y1="277.6563" y2="277.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="52.5" y="272.7231">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="65.5" y="272.7231">...to CDCServlet.</text><polygon fill="#A80036" points="667,317.7891,677,321.7891,667,325.7891,671,321.7891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="444" x2="673" y1="321.7891" y2="321.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="451" y="309.4224">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="197" x="464" y="301.856">If browser presents SSO token,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="190" x="464" y="316.9888">request SSO token validation.</text><polygon fill="#A80036" points="455,362.0547,445,366.0547,455,370.0547,451,366.0547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="449" x2="678" y1="366.0547" y2="366.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="461" y="353.688">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="474" y="346.1216">If SSO token is valid,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="474" y="361.2544">skip to 14. Otherwise...</text><polygon fill="#A80036" points="56.5,391.3203,46.5,395.3203,56.5,399.3203,52.5,395.3203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="50.5" x2="443" y1="395.3203" y2="395.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="62.5" y="390.3872">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="64" x="75.5" y="390.3872">Redirect...</text><polygon fill="#A80036" points="825,420.4531,835,424.4531,825,428.4531,829,424.4531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="45.5" x2="831" y1="424.4531" y2="424.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="52.5" y="419.52">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="204" x="65.5" y="419.52">...to OpenAM for authentication.</text><polygon fill="#A80036" points="56.5,449.5859,46.5,453.5859,56.5,457.5859,52.5,453.5859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="50.5" x2="836" y1="453.5859" y2="453.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="62.5" y="448.6528">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="75.5" y="448.6528">Authentication page</text><polygon fill="#A80036" points="825,478.7188,835,482.7188,825,486.7188,829,482.7188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="45.5" x2="831" y1="482.7188" y2="482.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="52.5" y="477.7856">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="65.5" y="477.7856">Submit credentials.</text><polygon fill="#A80036" points="56.5,522.8516,46.5,526.8516,56.5,530.8516,52.5,526.8516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="50.5" x2="836" y1="526.8516" y2="526.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="62.5" y="514.4849">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="311" x="84.5" y="506.9185">Set valid SSO token with OpenAM domain name,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="84.5" y="522.0513">and redirect...</text><polygon fill="#A80036" points="432,552.1172,442,556.1172,432,560.1172,436,556.1172" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="45.5" x2="438" y1="556.1172" y2="556.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="52.5" y="551.1841">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="74.5" y="551.1841">...to CDCServlet.</text><polygon fill="#A80036" points="667,581.25,677,585.25,667,589.25,671,585.25" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="444" x2="673" y1="585.25" y2="585.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="451" y="580.3169">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="189" x="473" y="580.3169">Request SSO token validation</text><polygon fill="#A80036" points="455,610.3828,445,614.3828,455,618.3828,451,614.3828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="449" x2="678" y1="614.3828" y2="614.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="461" y="609.4497">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="483" y="609.4497">SSO token is valid.</text><polygon fill="#A80036" points="56.5,654.5156,46.5,658.5156,56.5,662.5156,52.5,658.5156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="50.5" x2="443" y1="658.5156" y2="658.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="62.5" y="646.1489">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="84.5" y="638.5825">Send self-submitting form with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="212" x="84.5" y="653.7153">Liberty AuthN Response (LARES).</text><polygon fill="#A80036" points="325.5,713.7813,335.5,717.7813,325.5,721.7813,329.5,717.7813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="45.5" x2="331.5" y1="717.7813" y2="717.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="52.5" y="697.981">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="197" x="74.5" y="682.8481">Form POSTs automatically to a</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="74.5" y="697.981">policy agent endpoint that</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="74.5" y="713.1138">consumes the response.</text><polygon fill="#FBFB77" filter="url(#fld92mn)" points="50,731.1797,50,786.1797,359,786.1797,359,741.1797,349,731.1797,50,731.1797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="349" x2="349" y1="731.1797" y2="741.1797"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="359" x2="349" y1="741.1797" y2="741.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="56" y="748.2466">Policy agent extracts SSO token from LARES,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="274" x="56" y="763.3794">Sets cookie domain to full URL of resource,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="56" y="778.5122">Validates LARES attributes.</text><polygon fill="#A80036" points="56.5,827.5781,46.5,831.5781,56.5,835.5781,52.5,831.5781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="50.5" x2="336.5" y1="831.5781" y2="831.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="62.5" y="819.2114">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="84.5" y="811.645">Redirect, with request to delete the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="84.5" y="826.7778">amFilterCDSSORequest cookie...</text><polygon fill="#A80036" points="325.5,856.8438,335.5,860.8438,325.5,864.8438,329.5,860.8438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="45.5" x2="331.5" y1="860.8438" y2="860.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="52.5" y="855.9106">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="74.5" y="855.9106">...to protected resource.</text><polygon fill="#A80036" points="667,885.9766,677,889.9766,667,893.9766,671,889.9766" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="337.5" x2="673" y1="889.9766" y2="889.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="344.5" y="885.0435">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="189" x="366.5" y="885.0435">Request SSO token validation</text><polygon fill="#A80036" points="348.5,915.1094,338.5,919.1094,348.5,923.1094,344.5,919.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="342.5" x2="678" y1="919.1094" y2="919.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="354.5" y="914.1763">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="220" x="376.5" y="914.1763">Response for SSO token validation</text><polygon fill="#A80036" points="667,944.2422,677,948.2422,667,952.2422,671,948.2422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="337.5" x2="673" y1="948.2422" y2="948.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="344.5" y="943.3091">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="366.5" y="943.3091">Request policy decision</text><polygon fill="#A80036" points="348.5,973.375,338.5,977.375,348.5,981.375,344.5,977.375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="342.5" x2="678" y1="977.375" y2="977.375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="354.5" y="972.4419">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="179" x="376.5" y="972.4419">Response for policy decision</text><polygon fill="#A80036" points="56.5,1017.5078,46.5,1021.5078,56.5,1025.5078,52.5,1021.5078" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="50.5" x2="336.5" y1="1021.5078" y2="1021.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="62.5" y="1009.1411">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="202" x="84.5" y="1001.5747">Allow access &amp; return resource,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="222" x="84.5" y="1016.7075">or deny access &amp; return HTTP 403.</text></g></svg>