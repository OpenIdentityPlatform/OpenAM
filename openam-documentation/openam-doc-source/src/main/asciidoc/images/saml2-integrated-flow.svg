<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="976px" preserveAspectRatio="none" style="width:665px;height:976px;" version="1.1" viewBox="0 0 665 976" width="665px" zoomAndPan="magnify"><defs><filter height="300%" id="fhmr31x" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fhmr31x)" height="132.6641" style="stroke: #000000; stroke-width: 2.0;" width="637" x="13" y="334.3594"/><rect fill="#FFFFFF" filter="url(#fhmr31x)" height="246.4766" style="stroke: #000000; stroke-width: 2.0;" width="443" x="164.5" y="582.5547"/><rect fill="#FFFFFF" height="87.2031" style="stroke: none; stroke-width: 1.0;" width="443" x="164.5" y="599.6875"/><rect fill="#FFFFFF" height="142.1406" style="stroke: none; stroke-width: 1.0;" width="443" x="164.5" y="686.8906"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="42" x2="42" y1="86.2969" y2="975.5625"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="249.5" x2="249.5" y1="86.2969" y2="975.5625"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="520" x2="520" y1="86.2969" y2="975.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="23" y="82.9951">User</text><ellipse cx="42" cy="13" fill="#FEFECE" filter="url(#fhmr31x)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M42,21 L42,48 M29,29 L55,29 M42,48 L29,63 M42,48 L55,63 " fill="#FEFECE" filter="url(#fhmr31x)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#fhmr31x)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="147" x="174.5" y="34.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="133" x="181.5" y="54.6982">OpenAM SAML v2.0</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="110" x="193" y="70.9951">Service Provider</text><rect fill="#FEFECE" filter="url(#fhmr31x)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="124" x="456" y="34.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="70" x="483" y="54.6982">SAML v2.0</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="110" x="463" y="70.9951">Identity Provider</text><polygon fill="#A80036" points="238,113.2969,248,117.2969,238,121.2969,242,117.2969" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="42" x2="244" y1="117.2969" y2="117.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="49" y="112.3638">1.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="67" y="112.3638">Initiate authentication</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="250" x2="292" y1="176.8281" y2="176.8281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="292" x2="292" y1="176.8281" y2="189.8281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="251" x2="292" y1="189.8281" y2="189.8281"/><polygon fill="#A80036" points="261,185.8281,251,189.8281,261,193.8281,257,189.8281" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="257" y="156.6294">2.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="275" y="141.4966">Execute any modules in the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="275" y="156.6294">authentication chain that</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="275" y="171.7622">precede the SAML2 module</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="250" x2="292" y1="234.0938" y2="234.0938"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="292" x2="292" y1="234.0938" y2="247.0938"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="251" x2="292" y1="247.0938" y2="247.0938"/><polygon fill="#A80036" points="261,243.0938,251,247.0938,261,251.0938,257,247.0938" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="257" y="221.4614">3.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="275" y="213.895">Execute the SAML2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="275" y="229.0278">authentication module</text><rect fill="#EEEEEE" filter="url(#fhmr31x)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="657" x="3" y="275.6602"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="660" y1="275.6602" y2="275.6602"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="660" y1="278.6602" y2="278.6602"/><rect fill="#EEEEEE" filter="url(#fhmr31x)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="287" x="188" y="265.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="268" x="194" y="281.1606">SAML2 authentication module starts</text><polygon fill="#A80036" points="508,315.2266,518,319.2266,508,323.2266,512,319.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="250" x2="514" y1="319.2266" y2="319.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="257" y="314.2935">4.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="275" y="314.2935">Request assertion</text><rect fill="none" height="132.6641" style="stroke: #000000; stroke-width: 2.0;" width="637" x="13" y="334.3594"/><polygon fill="#EEEEEE" points="13,334.3594,380,334.3594,380,341.3594,370,351.3594,13,351.3594,13,334.3594" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="322" x="28" y="347.4263">If the user needs to authenticate to the IdP</text><polygon fill="#A80036" points="53,368.4922,43,372.4922,53,376.4922,49,372.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="47" x2="519" y1="372.4922" y2="372.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="59" y="367.5591">5.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="77" y="367.5591">Request credentials</text><polygon fill="#A80036" points="508,397.625,518,401.625,508,405.625,512,401.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="42" x2="514" y1="401.625" y2="401.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="49" y="396.6919">6.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="67" y="396.6919">Provide credentials</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="520" x2="562" y1="446.0234" y2="446.0234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="562" x2="562" y1="446.0234" y2="459.0234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="521" x2="562" y1="459.0234" y2="459.0234"/><polygon fill="#A80036" points="531,455.0234,521,459.0234,531,463.0234,527,459.0234" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="527" y="433.3911">7.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="545" y="425.8247">Authentication</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="545" y="440.9575">successful</text><polygon fill="#A80036" points="261,491.0234,251,495.0234,261,499.0234,257,495.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="255" x2="519" y1="495.0234" y2="495.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="267" y="490.0903">8.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="285" y="490.0903">Return assertion</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="250" x2="292" y1="554.5547" y2="554.5547"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="292" x2="292" y1="554.5547" y2="567.5547"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="251" x2="292" y1="567.5547" y2="567.5547"/><polygon fill="#A80036" points="261,563.5547,251,567.5547,261,571.5547,257,567.5547" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="257" y="534.356">9.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="275" y="519.2231">Attempt to access user by</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="275" y="534.356">searching for persistent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="275" y="549.4888">name ID (in SP data store)</text><rect fill="none" height="246.4766" style="stroke: #000000; stroke-width: 2.0;" width="443" x="164.5" y="582.5547"/><polygon fill="#EEEEEE" points="164.5,582.5547,576.5,582.5547,576.5,589.5547,566.5,599.5547,164.5,599.5547,164.5,582.5547" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="367" x="179.5" y="595.6216">If the name ID for the user is not found on the SP</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="164.5" x2="607.5" y1="600.6875" y2="600.6875"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="393" x="169.5" y="610.8979">[If dynamic profile creation and auto-federation are enabled]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="250" x2="292" y1="665.8906" y2="665.8906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="292" x2="292" y1="665.8906" y2="678.8906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="251" x2="292" y1="678.8906" y2="678.8906"/><polygon fill="#A80036" points="261,674.8906,251,678.8906,261,682.8906,257,678.8906" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="23" x="257" y="645.6919">10.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="284" y="630.5591">Create the user on the SP,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="190" x="284" y="645.6919">including the persistent name</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="284" y="660.8247">ID in the user profile</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="164.5" x2="607.5" y1="687.8906" y2="687.8906"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="417" x="169.5" y="698.1011">[If dynamic profile creation and auto-federation are not enabled,</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="438" x="169.5" y="710.9058">and if a linking chain exists, and if the name ID format is persistent]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="250" x2="292" y1="750.7656" y2="750.7656"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="292" x2="292" y1="750.7656" y2="763.7656"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="251" x2="292" y1="763.7656" y2="763.7656"/><polygon fill="#A80036" points="261,759.7656,251,763.7656,261,767.7656,257,763.7656" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="23" x="257" y="738.1333">11.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="284" y="730.5669">Invoke the linking chain to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="204" x="284" y="745.6997">authenticate the user on the SP</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="250" x2="292" y1="808.0313" y2="808.0313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="292" x2="292" y1="808.0313" y2="821.0313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="251" x2="292" y1="821.0313" y2="821.0313"/><polygon fill="#A80036" points="261,817.0313,251,821.0313,261,825.0313,257,821.0313" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="23" x="257" y="795.3989">12.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="198" x="284" y="787.8325">Write the persistent name ID in</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="284" y="802.9653">the user profile</text><rect fill="#EEEEEE" filter="url(#fhmr31x)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="657" x="3" y="856.5977"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="660" y1="856.5977" y2="856.5977"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="660" y1="859.5977" y2="859.5977"/><rect fill="#EEEEEE" filter="url(#fhmr31x)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="330" x="166.5" y="846.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="311" x="172.5" y="862.0981">SAML2 authentication module is complete</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="250" x2="292" y1="915.4297" y2="915.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="292" x2="292" y1="915.4297" y2="928.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="251" x2="292" y1="928.4297" y2="928.4297"/><polygon fill="#A80036" points="261,924.4297,251,928.4297,261,932.4297,257,928.4297" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="23" x="257" y="902.7974">13.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="215" x="284" y="895.231">Execute remaining authentication</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="229" x="284" y="910.3638">modules in the authentication chain</text><polygon fill="#A80036" points="53,953.4297,43,957.4297,53,961.4297,49,957.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="47" x2="249" y1="957.4297" y2="957.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="23" x="59" y="952.4966">14.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="86" y="952.4966">Authentication complete</text></g></svg>